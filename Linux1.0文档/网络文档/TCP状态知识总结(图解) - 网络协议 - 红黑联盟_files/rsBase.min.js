var styleSheetBuilder={addCss:function(d){var e=document;var b=e.createElement("style");b.setAttribute("type","text/css");if(b.styleSheet){b.styleSheet.cssText=d}else{var a=e.createTextNode(d);b.appendChild(a)}var c=e.getElementsByTagName("head");if(c.length){c[0].appendChild(b)}else{e.documentElement.appendChild(b)}},cssObjToStr:function(c){var a="";for(var b in c){a=a+b+c[b]}return a}};var utility={getDom:function(a){if("string"===typeof a||a instanceof String){return document.getElementById(a)}else{if(a&&a.nodeName&&(a.nodeType==1||a.nodeType==9)){return a}}return a},strToJson:function(str){var json=eval("("+str+")");return json},hasClass:function(a,c){var b=new RegExp("(\\s|^)"+c+"(\\s|$)");return a.className.match(b)},addClass:function(a,b){if(!this.hasClass(a,b)){a.className+=" "+b}},removeClass:function(a,c){if(this.hasClass(a,c)){var b=new RegExp("(\\s|^)"+c+"(\\s|$)");a.className=a.className.replace(b," ")}},getDocument:function(a){if(!a){return document}a=this.g(a);return a.nodeType==9?a:a.ownerDocument||a.document},getStyle:function(c,b){var a;c=this.getDom(c);var e=this.getDocument(c);var f="";if(b.indexOf("-")>-1){f=b.replace(/[-_][^-_]{1}/g,function(g){return g.charAt(1).toUpperCase()})}else{f=b.replace(/[A-Z]{1}/g,function(g){return"-"+g.charAt(0).toLowerCase()})}var d;if(e&&e.defaultView&&e.defaultView.getComputedStyle){d=e.defaultView.getComputedStyle(c,null);if(d){a=d.getPropertyValue(b)}if(typeof a!=="boolean"&&!a){a=d.getPropertyValue(f)}}else{if(c.currentStyle){d=c.currentStyle;if(d){a=d[b]}if(typeof a!=="boolean"&&!a){a=d[f]}}}return a}};var defaultValueManager={textlink:{color:"#fff","font-family":"微软雅黑","font-size":"18px",width:"100px",height:"100px",display:"inline"},imagelink:{width:"100px",height:"20px"},iconlink:{width:"100px",height:"20px",display:"block"}};var adComponent={layout:function(a){this.createDom(a);return true},text:function(b){var c=b.prefix||"";var d=b.suffix||"";var e=document.createElement("span");e.innerHTML=c+b.content+d;b.styleObj=this.getStyleObj(b);if(typeof b.enableClick=="undefined"||b.enableClick){var a=this.createDomLink(b);if(b.content){a.innerHTML=c+b.content+d}b.child=a}else{b.child=e}this.createDom(b);this.calculateText(b)},image:function(b){b.styleObj=this.getStyleObj(b);var c=document.createElement("img");c.src=b.content;c.style.width=b.styleObj.width;c.style.height=b.styleObj.height;if(typeof b.enableClick=="undefined"||b.enableClick){var a=this.createDomLink(b);a.appendChild(c);b.child=a}else{b.child=c}this.createDom(b)},icon:function(b){b.styleObj=this.getStyleObj(b);if(typeof b.enableClick=="undefined"||b.enableClick){var a=this.createDomLink(b);if(b.content){a.innerHTML=b.content}b.child=a}this.createDom(b)},createDom:function(d){var c=d.domName||"div";var e=document.createElement(c);e.id=d.id;if(d.className){e.className=d.className}smGlobleCss["#"+e.id]="{"+d.style+"}";if(d.child){e.appendChild(d.child)}if(d.isBDPreview&&d.bdPreview){var b=this.createBDPreviewIcon(d);e.appendChild(b)}var a=document.getElementById(d.parent);a.appendChild(e)},createDomLink:function(b){var a=document.createElement("a");a.id="link_"+b.id;a.target="_blank";smGlobleCss["#"+a.id]="{"+this.createDomLinkStyle(b)+"}";a.href=b.curl;if(b.linkDisplay){a.style.display=b.linkDisplay}return a},createDomLinkStyle:function(b){var d=b.styleObj;var e={};for(var a in defaultValueManager[b.type+"link"]){if(d[a]){e[a]=d[a]}else{e[a]=d[a]=defaultValueManager[b.type+"link"][a]}}b.styleObj=d;var c=this.styleObjToStr(e);return c},createBDPreviewIcon:function(a){var b=document.createElement("div");b.className="bdPreview";b.style.cssText=a.bdPreviewStyle||"";b.innerHTML=a.bdPreview;return b},getStyleObj:function(b){var d=this.styleStrToObj(b.style);if(b.className){var e=smGlobleCss["."+b.className];if(e){var a=e.replace(/\{|\}/g,"");var c=this.styleStrToObj(a);d=this.extend(d,c)}}return d},clone:function(c){var b;if(c.constructor==Object){b=new c.constructor()}else{b=new c.constructor(c.valueOf())}for(var a in c){if(typeof(c[a])=="object"){b[a]=this.clone(c[a])}else{b[a]=c[a]}}return b},styleStrToObj:function(f){var e={};var d=f.split(";");for(var c=0,a=d.length;c<a;c++){if(d[c]){var b=d[c].split(":");e[b[0]]=b[1]}}return e},styleObjToStr:function(b){var c="";for(var a in b){c=c+a+":"+b[a]+";"}return c},calculateText:function(c){if(!c.content){return}var e=c.prefix||"";var g=c.suffix||"";var h=document.getElementById(c.id);var f=c.styleObj;var d=f["font-size"].replace("px","");var b=f.width.replace("px","");var a=(this.getByteLength(e+c.content+g)*d)/2;if(a<b){h.style.lineHeight=f.height}},getByteLength:function(a){if(!a){return""}a=String(a);a=a.replace(/([^\x00-\xff])/g,"\x241 ");return a.length},extend:function(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=c[b]||a[b]}}return c}};var renderEngine={containerId:"container",renderContainer:function(h){var j=h.isGongyi||false;var d=h.config;var b=document.createElement("div");b.id="containerWrap";b.className="containerWrap";b.style.position="relative";var e=adComponent.styleStrToObj(smLayoutconfig.container.style);if(d.templateWidth&&d.templateHeight){var c=1;var n=smGlobleCss[".container"].split(";");for(var g=0,f=n.length;g<f;g++){if(n[g].indexOf("border")>-1){c=parseInt(n[g].split(":")[1].match(/\dpx/)[0].replace("px",""))}}b.style.paddingLeft=b.style.paddingRight=(parseInt(d.templateWidth)-parseInt(e.width)-2*c)/2+"px";b.style.paddingTop=b.style.paddingBottom=(parseInt(d.templateHeight)-parseInt(e.height)-2*c)/2+"px";b.style.width=parseInt(d.templateWidth)-2*c-2*parseInt(b.style.paddingLeft.replace("px",""))+"px"||e.width;b.style.height=parseInt(d.templateHeight)-2*c-2*parseInt(b.style.paddingTop.replace("px",""))+"px"||e.height}for(var g=0,f=n.length;g<f;g++){if(n[g].indexOf("border")>-1){b.style.border=n[g].split(":")[1]}}window.loader=document.getElementById("loader");window.loader.parentNode.insertBefore(b,window.loader);if(d.containerShowLogo!=0){var k=d.logoType||"bd-logo";if(d.templateWidth&&d.templateWidth==310){k=k+" bd-logo-310-260"}var m={className:k,isGongyi:j};b.appendChild(this.drawLogo(m))}var a=document.createElement("div");a.id=this.containerId;var e=adComponent.styleStrToObj(smLayoutconfig.container.style);a.style.width=e.width;a.style.height=e.height;a.style.border=0;a.className="container";b.appendChild(a);return b},renderItem:function(o){var m=o.smLayoutconfig;var g=o.ads;var f=o.adComponent;var e={};var u={};var n="";delete m.container;for(var y in m){if(y.indexOf("brand")>-1){e[y]=m[y]}else{u[y]=m[y]}}var q=g.smartIdeaProduct;for(var b in e){var j=f.clone(e[b]);if(g.isBDPreview){j.isBDPreview=true}j.content=j.content||q[0].brandLogo;var c=utility.strToJson(q[0].jsonData);if(j.k&&c[j.k]){j.content=c[j.k]}j.curl=q[0].clickUrl||g.clickUrl;this.renderItemByType(j)}var r=[];var x=u.adBlock.adItemNum||1;var p=Math.ceil(q.length/x);for(var v=0;v<p;v++){var w=f.clone(u);for(var y in w){var j=w[y];if(j.id=="adBlock"){var h=f.styleStrToObj(j.style);if(v!=0){h.left=parseInt(h.left.replace("px",""))+parseInt(h.width.replace("px",""))+"px"}j.style=f.styleObjToStr(h);j.id=j.id+"_"+v}if(w[y].parent==="adBlock"){w[y].parent=w[y].parent+"_"+v}}r.push(w)}var a=-1;var d=q.length;if(p>0&&m.adBlockWrap){f.layout(m.adBlockWrap)}for(var v=0,s=r.length;v<s;v++){var w=r[v];f.layout(w.adBlock);delete w.adBlock;delete w.adBlockWrap;if(x!=1){for(var t=0;t<x&&(a+1)!=d;t++){if(t==x-1||(a+2)==d){delete w.adItemSpace}for(var y in w){if(y=="adItem"){a++}var j=f.clone(w[y]);if(j.id!="adItem"&&j.id!="adItemSpace"){j.parent=j.parent+"_"+a}j.id=j.id+"_"+a;var c=utility.strToJson(q[a].jsonData);if(j.k&&c[j.k]){j.content=c[j.k]}if(g.isBDPreview){j.isBDPreview=true}j.curl=q[a].clickUrl||g.clickUrl;this.renderItemByType(j)}}}else{a++;for(var y in w){var j=w[y];j.id=j.id+"_"+a;if(j.parent.indexOf("adBlock")==-1){j.parent=j.parent+"_"+a}var c=utility.strToJson(q[a].jsonData);if(j.k&&c[j.k]){j.content=c[j.k]}if(g.isBDPreview){j.isBDPreview=true}j.curl=q[a].clickUrl||g.clickUrl;this.renderItemByType(j)}}}},renderItemByType:function(a){if(!a.isShow){return}switch(a.type){case"layout":adComponent.layout(a);break;case"image":adComponent.image(a);break;case"text":adComponent.text(a);break;case"icon":adComponent.icon(a);break}},drawLogo:function(c){c=c||{};var d=c.logoId||"logo";var b=document.getElementById(d);if(!b){b=document.createElement("a")}var a=false;if(typeof c.isGongyi==="undefined"&&typeof window.isGongyi!=="undefined"){a=window.isGongyi}else{a=c.isGongyi?true:false}if(config.account&&config.account!=="super-nova"){b.innerHTML="&nbsp;";b.className=c.className||"bd-logo";b.target="_blank";if(a){b.href="http://gongyi.baidu.com/";b.title="\u767e\u5ea6\u516c\u76ca"}else{b.href="http://wangmeng.baidu.com/";b.title="\u767e\u5ea6\u7f51\u76df\u63a8\u5e7f"}}else{b.href="";b.title="";b.className="bd-logo5";b.onclick=function(f){if(f&&f.preventDefault){f.preventDefault()}else{window.event.returnValue=false}return false};b.innerHTML=""}var e=function(){b.style.zoom="1"};setTimeout(e,100);return b}};var lunboComponent={init:function(a){this.initConfig(a);this.layoutIcon(a);this.layoutLunboPageNum(a);this.lunbo(a)},initConfig:function(b){this.option=b;this.lunboLeftIcon=b.lunboLeftIcon;this.lunboRightIcon=b.lunboRightIcon;this.lunboPageNum=b.lunboPageNum;var a=smLayoutconfig.adBlock.adItemNum||1;this.pageCountNum=Math.ceil(ads[0].smartIdeaProduct.length/a);this.currentAdNum=0;this.currentAdNumDom=null;this.lunboTimer=null;this.leftInterval=null;this.rightInterval=null;this.lunboRun=true;this.lunboEachStep=b.lunboStep/10},layoutIcon:function(b){var f=document.getElementById(b.lunboLeftIconBlock.parent);var e=".leftIconBlock{cursor:pointer;"+b.lunboLeftIconBlock.style+"}.leftIcon{"+b.lunboLeftIcon.style+"background:url('"+b.lunboLeftIcon.src+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboLeftIcon.src+"');_background:none;cursor:pointer;}.leftIconMouseOver{background:url('"+b.lunboLeftIcon.mouseover+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboLeftIcon.mouseover+"');_background:none;cursor:pointer;}.leftIconHover{background:url('"+b.lunboLeftIcon.hover+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboLeftIcon.hover+"');_background:none;cursor:pointer;}.rightIconBlock{cursor:pointer;"+b.lunboRightIconBlock.style+"}.rightIcon{"+b.lunboLeftIcon.style+"background:url('"+b.lunboRightIcon.src+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboRightIcon.src+"');_background:none;cursor:pointer;}.rightIconMouseOver{background:url('"+b.lunboRightIcon.mouseover+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboRightIcon.mouseover+"');_background:none;cursor:pointer;}.rightIconHover{background:url('"+b.lunboRightIcon.hover+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+b.lunboRightIcon.hover+"');_background:none;cursor:pointer;}";if(b.lunboLeftIconBlock&&b.lunboLeftIconBlock.isShow){var d=document.createElement("div");d.className="leftIconBlock";var g=document.createElement("div");g.className="leftIcon";d.appendChild(g);f.appendChild(d);d.onmouseover=function(){utility.addClass(g,"leftIconHover");lunboComponent.lunboRun=false};d.onmouseout=function(){utility.removeClass(g,"leftIconHover");lunboComponent.lunboRun=true};d.onclick=this.previouAd}if(b.lunboRightIconBlock&&b.lunboRightIconBlock.isShow){var a=document.createElement("div");a.className="rightIconBlock";var c=document.createElement("div");c.className="rightIcon";a.appendChild(c);f.appendChild(a);a.onmouseover=function(){utility.addClass(c,"rightIconHover");lunboComponent.lunboRun=false};a.onmouseout=function(){utility.removeClass(c,"rightIconHover");lunboComponent.lunboRun=true};a.onclick=this.nextAd;f.onmouseover=function(){utility.addClass(c,"rightIconMouseOver");utility.addClass(g,"leftIconMouseOver")};f.onmouseout=function(){utility.removeClass(c,"rightIconMouseOver");utility.removeClass(g,"leftIconMouseOver")}}styleSheetBuilder.addCss(e)},layoutLunboPageNum:function(a){if(!a.lunboPageNumBlock.isShow){return}var d=document.getElementById(a.lunboPageNumBlock.parent);var c=".pageNum{"+a.lunboPageNumBlock.style+"background:url('"+a.lunboPageNumBlock.src+"') no-repeat 0 0; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=none, src='"+a.lunboPageNumBlock.src+"');_background:none;}.currentpageNum{color:#999999;line-height:36px;text-align:center;width:36px;padding-left:5px;font-family:verdana;font-size:11px;}";var b=document.createElement("div");b.className="pageNum";d.appendChild(b);var e=document.createElement("div");e.className="currentpageNum";e.innerHTML="<span id='currentPageNum' style='"+a.lunboCurrentPageNum.style+"'>1</span>/"+this.pageCountNum;b.appendChild(e);this.currentAdNumDom=utility.getDom("currentPageNum");styleSheetBuilder.addCss(c)},changeAd:function(a){this.currentAdNum=a;lunboComponent.currentDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.currentDom.style.left=0},previouAd:function(){clearTimeout(this.lunboTimer);lunboComponent.lunboRun=false;clearInterval(lunboComponent.rightInterval);lunboComponent.getCurrentAdNum("left");lunboComponent.previouDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.previouDom.style.left=smLunboConfig.lunboStep+"px";lunboComponent.getCurrentAdNum("right");lunboComponent.currentDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.getCurrentAdNum("right");lunboComponent.nextDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.currentDom.style.left=0;lunboComponent.nextDom.style.left="-"+smLunboConfig.lunboStep+"px";if(smLunboConfig.isAnimation){lunboComponent.rightInterval=setInterval(function(){lunboComponent.currentDom.style.left=parseFloat(lunboComponent.currentDom.style.left.replace("px",""))+lunboComponent.lunboEachStep+"px";lunboComponent.nextDom.style.left=parseFloat(lunboComponent.nextDom.style.left.replace("px",""))+lunboComponent.lunboEachStep+"px";if(Math.abs(lunboComponent.nextDom.style.left.replace("px",""))<lunboComponent.lunboEachStep){clearInterval(lunboComponent.rightInterval);lunboComponent.nextDom.style.left=0;lunboComponent.currentDom.style.left=smLunboConfig.lunboStep+"px"}},100)}else{lunboComponent.currentDom.style.left=smLunboConfig.lunboStep+"px";lunboComponent.nextDom.style.left=0}if(smLunboConfig.lunboPageNumBlock.isShow){lunboComponent.currentAdNumDom.innerHTML=lunboComponent.currentAdNum+1}setTimeout(function(){lunboComponent.lunboRun=true;lunboComponent.lunbo(smLunboConfig)},1000)},nextAd:function(){clearTimeout(this.lunboTimer);lunboComponent.lunboRun=false;clearInterval(lunboComponent.leftInterval);lunboComponent.getCurrentAdNum("right");lunboComponent.previouDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.previouDom.style.left="-"+smLunboConfig.lunboStep+"px";lunboComponent.getCurrentAdNum("left");lunboComponent.currentDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.getCurrentAdNum("left");lunboComponent.nextDom=utility.getDom(smLunboConfig.lunboBlock+"_"+lunboComponent.currentAdNum);lunboComponent.currentDom.style.left=0;lunboComponent.nextDom.style.left=smLunboConfig.lunboStep+"px";if(smLunboConfig.isAnimation){lunboComponent.leftInterval=setInterval(function(){lunboComponent.currentDom.style.left=parseFloat(lunboComponent.currentDom.style.left.replace("px",""))-lunboComponent.lunboEachStep+"px";lunboComponent.nextDom.style.left=parseFloat(lunboComponent.nextDom.style.left.replace("px",""))-lunboComponent.lunboEachStep+"px";if(Math.abs(lunboComponent.nextDom.style.left.replace("px",""))<lunboComponent.lunboEachStep){clearInterval(lunboComponent.leftInterval);lunboComponent.nextDom.style.left=0;lunboComponent.currentDom.style.left=smLunboConfig.lunboStep+"px"}},50)}else{lunboComponent.currentDom.style.left="-"+smLunboConfig.lunboStep+"px";lunboComponent.nextDom.style.left=0}if(smLunboConfig.lunboPageNumBlock.isShow){lunboComponent.currentAdNumDom.innerHTML=lunboComponent.currentAdNum+1}setTimeout(function(){lunboComponent.lunboRun=true;lunboComponent.lunbo(smLunboConfig)},1000)},getCurrentAdNum:function(a){if(a=="left"){lunboComponent.currentAdNum++;if(lunboComponent.currentAdNum==lunboComponent.pageCountNum){lunboComponent.currentAdNum=0}}else{lunboComponent.currentAdNum--;if(lunboComponent.currentAdNum==-1){lunboComponent.currentAdNum=lunboComponent.pageCountNum-1}}},lunbo:function(a){if(!this.lunboRun){return}var b=a.lunboTimeArray[this.currentAdNum]||5000;clearTimeout(this.lunboTimer);this.lunboTimer=setTimeout(function(){lunboComponent.lunboAd()},b)},lunboAd:function(){if(!this.lunboRun){return}this.nextAd();this.lunbo(smLunboConfig)}};var ThisPage={init:function(){this.initConfig()},initConfig:function(){this.config=window.config;this.isGongyi=this.config.isGongyi||false;this.smGlobleCss=window.smGlobleCss;this.smLayoutconfig=window.smLayoutconfig;this.renderEngine=window.renderEngine;this.adComponent=window.adComponent;this.styleSheetBuilder=window.styleSheetBuilder;this.ads=window.ads;this.layout()},layout:function(){this.containerDom=renderEngine.renderContainer({config:this.config,isGongyi:this.isGongyi});renderEngine.renderItem({smLayoutconfig:this.smLayoutconfig,adComponent:this.adComponent,ads:this.ads[0]});var a=styleSheetBuilder.cssObjToStr(smGlobleCss);styleSheetBuilder.addCss(a);if(smLunboConfig&&smLunboConfig.isLunbo){var b=Math.ceil(ads[0].smartIdeaProduct.length/smLayoutconfig.adBlock.adItemNum);if(b==1){return}lunboComponent.init(smLunboConfig)}}};ThisPage.init();