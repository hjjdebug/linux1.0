!function(){var e=function(e){var n=e,o=!1;if(e.positions.length)for(i=0;i<e.positions.length;i++)"6103"===e.positions[i]&&0===e.status&&(o=!0);return o&&(n.positions=["6103"],n.status=1),n},n=function(e){var n=new Image,o="_img_"+Math.random();window[o]=n,n.onload=n.onerror=function(){window[o]=null},n.src=e},o={set:function(e,n,o){if("number"==typeof o.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*o.expires),o.expires=t}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")},get:function(e){for(var n,o=document.cookie?document.cookie.split("; "):[],t=/(%[0-9A-Z]{2})+/g,i=0;i<o.length;i++){var a=o[i].split("="),r=a[0].replace(t,decodeURIComponent),c=a.slice(1).join("=");if('"'===c.charAt(0)&&(c=c.slice(1,-1)),c=c.replace(t,decodeURIComponent),e===r){n=c;break}e||(n[r]=c)}return n}},t={advertLoad:[]},a=function(i,a,r,c,d,p){var s=function(e){var n={client_id:r};i.ajax({url:"http://changyan.sohu.com/api/2/user/info",cache:!1,dataType:"jsonp",data:n,success:function(n){e(n)},error:function(){e()}})},u=function(e,o){var a="",o=o||0;window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready?window.changyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)}):window.cyan&&window.cyan.api&&"function"==typeof window.cyan.api.ready&&window.cyan.api.ready(function(e){var n=e.getUUID();"string"==typeof n&&32===n.length&&(a=n)});var s=function(e,n,t,c,d,p,s,u,l,f,y){var g={appId:r,advertId:e,agencyType:n,pce:t,tag:c,ref:d,uuid:a,uid:o};void 0!==p&&(g.rtbAdId=p),void 0!==s&&(g.winNoticeUrl=s),void 0!==u&&(g.dspId=u),void 0!==l&&(g.type=l),void 0!==f&&(g.category=f),void 0!==y&&(g.isCookieMapping=y),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:g})},u=function(e,n,t,c,d,p,s,u,l,f){var y={appId:r,advertId:e,agencyType:n,pce:t,tag:c,ref:d,category:f,uuid:a,uid:o};void 0!==p&&(y.rtbAdId=p),void 0!==s&&(y.dspId=s),void 0!==u&&(y.isCookieMapping=u),void 0!==l&&(y.type=l),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/click",dataType:"jsonp",data:y})},l={appId:r,category:c,title:d,url:p,position:e,uuid:a,uid:o,userAgent:window.navigator.userAgent};1607===l.position&&(l.isLeft=!0),1608===l.position&&(l.isLeft=!1,l.position=1607),i.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:l,dataType:"jsonp",success:function(e){if(0===e.code){var o={};"RTB"===e.agencyType&&(o=i.parseJSON(e.advertContent),function(){o.exposure_urls instanceof window.Array&&i.each(o.exposure_urls,function(e,o){o.exposureUrl instanceof window.Array&&"number"==typeof o.timeMillis&&window.setTimeout(function(){i.each(o.exposureUrl,function(e,o){n(o)})},1e3*o.timeMillis)})}()),s(e.advertId,e.agencyType,e.pce,e.tag,e.ref,o.rtbAdId,o.winNoticeUrl,o.dspId,o.type,o.category,o.isCookieMapping),e.params=l,e.sendClickLog=function(){"RTB"===e.agencyType&&o.clickUrls&&o.clickUrls.length&&i.each(o.clickUrls,function(e,o){n(o)}),u(e.advertId,e.agencyType,e.pce,e.tag,e.ref,o.rtbAdId,o.dspId,o.cookieMapping,o.type,o.category)};var a,r=t.advertLoad;for(a=0;a<r.length;a++)r[a](e)}}})},l=function(e){i.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:r},dataType:"jsonp",success:function(n){0===n.code&&"function"==typeof e&&e(n)}})};l(function(n){n=e(n);var t,i=!1;for(t=0;t<n.positions.length;t++)"6103"===n.positions[t]&&(i=!0);if(n&&1===n.status){if(n.disabledChannels&&n.disabledChannels.length){var r=!0;if(function(){var e;for(e=0;e<n.disabledChannels.length;e++)n.disabledChannels[e]===c&&(r=!1)}(),r===!1&&!i)return;r===!1&&i&&(n.positions=["6103"])}if(n.positions&&n.positions.length){var d=function(e){var o,t;for(o=0;o<n.positions.length;o++)t=parseInt(n.positions[o],10),"wap"===a&&5e3>t||"pc"===a&&t>5e3||("pc"!==a||1530!==t||document.getElementById("SOHUCS"))&&u(t,e)};"mark"===o.get("cy-mark")?s(function(e){var n;e&&e.user_id?n=e.user_id:o.set("cy-mark",null,{expires:-1,path:"/"}),d(n)}):(d(),window.setTimeout(function(){s(function(e){e&&e.user_id&&o.set("cy-mark","mark",{expires:30,path:"/"})})},5e3))}}})},r=function(e){if(window.XMLHttpRequest){var n=e.type,o=e.appId,t="null",i=window.document.title,r=window.location.href;"pc"!==n&&"wap"!==n&&(n="pc"),e.hasOwnProperty("categoryId")&&void 0!==e.categoryId&&(t=e.categoryId),e.hasOwnProperty("title")&&(i=e.title),e.hasOwnProperty("url")&&(r=e.url),a(window.changyanjQuery||window.cyanZepto||window.jQuery,n,o,t,i,r)}};r.on=function(e,n){t[e]&&"function"==typeof n&&t[e].push(n)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=r)}();